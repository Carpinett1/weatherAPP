(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function a(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=a(e);fetch(e.href,t)}})();const g="2debbbd8d3df40168b9201335232505",v=async i=>{const a=await(await fetch(`https://api.weatherapi.com/v1/search.json?lang=pt&key=${g}&q=${i}`)).json();return a.error&&window.alert("Insira uma Cidade!"),a.length===0&&window.alert("Nenhuma cidade encontrada"),a},b=async i=>{const a=await(await fetch(`https://api.weatherapi.com/v1/current.json?lang=pt&key=${g}&q=${i}`)).json(),{current:o,location:e}=await a,{condition:t}=o;return{name:e.name,country:e.country,temp:o.temp_c,condition:t.text,icon:t.icon,url:i}},x="2debbbd8d3df40168b9201335232505";function c(i,n,a=""){const o=document.createElement(i);return o.classList.add(...n.split(" ")),o.textContent=a,o}function L(i){const{date:n,maxTemp:a,minTemp:o,condition:e,icon:t}=i,s=new Date(n);s.setDate(s.getDate()+1);const d=s.toLocaleDateString("pt-BR",{weekday:"short"}),r=c("div","forecast"),h=c("p","forecast-weekday",d),y=c("span","forecast-temp max","max"),E=c("span","forecast-temp max",`${a}º`),C=c("span","forecast-temp min","min"),p=c("span","forecast-temp min",`${o}º`),l=c("div","forecast-temp-container");l.appendChild(y),l.appendChild(C),l.appendChild(E),l.appendChild(p);const m=c("p","forecast-condition",e),u=c("img","forecast-icon");u.src=t.replace("64x64","128x128");const f=c("div","forecast-middle-container");return f.appendChild(l),f.appendChild(u),r.appendChild(h),r.appendChild(f),r.appendChild(m),r}function w(i){const n=document.getElementById(i);for(;n.firstChild;)n.removeChild(n.firstChild)}function I(i){const n=document.getElementById("forecast-container"),a=document.getElementById("weekdays");w("weekdays"),i.forEach(o=>{const e=L(o);a.appendChild(e)}),n.classList.remove("hidden")}function B(i){const{name:n,country:a,temp:o,condition:e,icon:t,url:s}=i,d=c("li","city"),r=c("div","city-heading"),h=c("h2","city-name",n),y=c("p","city-country",a);r.appendChild(h),r.appendChild(y);const E=c("p","city-temp",`${o}º`),C=c("p","city-condition",e),p=c("div","city-temp-container");p.appendChild(C),p.appendChild(E);const l=c("img","condition-icon");l.src=t.replace("64x64","128x128");const m=c("div","city-info-container");m.appendChild(p),m.appendChild(l);const u=c("button","city-forecast-button","Ver previsão"),f=c("span","hidden",s);return u.appendChild(f),d.appendChild(r),d.appendChild(m),d.appendChild(u),d}const $=async i=>{const o=(await(await fetch(`https://api.weatherapi.com/v1/forecast.json?lang=pt&key=${x}&q=${i}&days=7`)).json()).forecast.forecastday.map(e=>({date:e.date,maxTemp:e.day.maxtemp_c,minTemp:e.day.mintemp_c,condition:e.day.condition.text,icon:e.day.condition.icon}));I(o)},T=()=>{document.querySelectorAll(".city-forecast-button").forEach(n=>{n.addEventListener("click",a=>{const o=a.target.firstElementChild.innerHTML;$(o)})})};function k(i){i.preventDefault(),w("cities");const a=document.getElementById("search-input").value;v(a).then(o=>{const e=o.map(t=>t.url).map(t=>b(t));Promise.all(e).then(t=>{t.forEach(s=>{const d=B(s);document.getElementById("cities").appendChild(d),T()})})})}document.getElementById("search-form").addEventListener("submit",k);document.getElementById("close-forecast").addEventListener("click",()=>{document.getElementById("forecast-container").classList.add("hidden")});
